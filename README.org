*Emacs Monkeytype* is a typing game/tutor inspired by the open source and community driven [[https://monkeytype.com][monkeytype.com]] but for Emacs.

* Table of Contents                                       :TOC_4_gh:noexport:
- [[#usage][Usage]]
- [[#features][Features]]
  - [[#to-come-prs-welcome][To come... (PRs welcome)]]
  - [[#tips][Tips]]
- [[#commands--key-bindings][Commands / Key bindings]]
- [[#customisation][Customisation]]
- [[#log][Log]]
- [[#install][Install]]
- [[#changelog][Changelog]]
  - [[#011][0.1.1]]
  - [[#010][0.1.0]]
- [[#license][License]]

* Usage

Use one of the functions to enter =monkeytype= mode (=monkeytype-region=, =monkeytype-buffer= or =monkeytype-fortune=).

(Note: You should bind these functions to anything you want in your =.emacs=.)

The buffer should look as follows:

#+attr_latex: :width 600px
  [[file:img/monkeytype-paused.png]]

The section inside the red rectangle is Monkeytype's mode-line and the following is the fields breakdown:

*MT[WPM Accuracy Elapsed-time (words/corrections/errors)]*

Then you can either type all the way to the end or stop/finish (=C-c C-C s= / =monkeytype-stop=).

The buffer should look as follows:

#+attr_latex: :width 600px
  [[file:img/monkeytype-results-without-log.png]]

This Results buffer re-renders the typed text highlighting errors and either correct or incorrect corrections
(highlighted with a different background and slightly different colour).

At this point you can either practice mistyped words with =monkeytype-mistyped-words=  or just troubling/hard transitions with =monkeytype--hard-transition= (=C-c C-c h=).

* Features

  - Type any text you want.
  - Mode-line live WPM (=monkeytype-mode-line-interval-update= adjust the update frequency).
  - Practice mistyped words.
  - Practice troubling/hard key combinations/transitions (useful when practising with different keyboard layouts).
  - Mistyped words or hard transitions can be saved to =~/.monkeype/{words or transitions}= (see: =monkeytype-directory= =monkeytype-save-mistyped-words= =monkeytype-save-hard-transitions=).
  - Visual representation of typed text including errors and retries/corrections.
  - UI customisation.
  - Optionally randomise practice words/transitions (see: =monkeytype-randomize=).
  - Optionally downcase practice words/transitions (see: =monkeytype-downcase=).
  - Optionally treat newlines as whitespace (see: =monkeytype-treat-newline-as-space=).
  - Optionally auto-fill text to the defaults =fill-column= value (see: =monkeytype-auto-fill=).
  - Auto stop after 5 seconds of no input (=C-c C-c r= [ =monkeytype-resume= ] resumes).
  - =monkeytype-word-regexp= customises the regexp used for removing characters from words (defaults to: ;:.`",()-?!).

** To come... (PRs welcome)

   - Save results / history

** Tips

+ When using =evil-mode= it's useful to automatically enable =evil-insert= (to start typing right away).

+ When using =evil-escape=, =evil-escape-mode= has to be disabled in order to prevent double keystrokes getting registered.
 
+ Installing =centered-cursor-mode= is useful for auto scrolling/paging in multi-page / long texts.
https://github.com/emacsmirror/centered-cursor-mode

This can then be enabled with a hook in your =.emacs=:

#+BEGIN_SRC emacs-lisp
  (add-hook 'monkeytype-mode-hook
            (lambda ()
              (centered-cursor-mode)
              (evil-escape-mode -1)
              (evil-insert -1)))
#+END_SRC

* Commands / Key bindings

=monkeytype-mode=

| Key binding | Function                           |
|-------------+------------------------------------|
|             | =monkeytype-region=                |
|             | =monkeytype-buffer=                |
| C-c C-c f   | =monkeytype-fortune=               |
| C-c C-c p   | =monkeytype-pause=                 |
| C-c C-c r   | =monkeytype-resume=                |
| C-c C-c s   | =monkeytype-stop=                  |
| C-c C-c t   | =monkeytype-repeat=                |
| C-c C-c m   | =monkeytype-mistyped-words=        |
| C-c C-c h   | =monkeytype-hard-transitions=      |
| C-c C-c a   | =monkeytype-save-mistyped-words=   |
| C-c C-c o   | =monkeytype-save-hard-transitions= |

* Customisation

Customisation in available via =M-x customize= under the monkeytype group
or by directly modifying the =custom-set-variables= in your =.emacs= file.

#+BEGIN_SRC emacs-lisp
  (custom-set-variables
   ;; custom-set-variables was added by Custom.
   ;; If you edit it by hand, you could mess it up, so be careful.
   ;; Your init file should contain only one such instance.
   ;; If there is more than one, they won't work right.
   '(monkeytype-face-default '(:family "Menlo" :height 1.6 :foreground "#969896"))
   '(monkeytype-face-correct '(:foreground "#98be65"))
   '(monkeytype-face-error '(:foreground "#ff6c6b"))
   '(monkeytype-face-correction-error '(:inherit region :foreground "#ff6c6b"))
   '(monkeytype-face-correction-correct '(:inherit region :foreground "#98be65"))
   '(monkeytype-face-header-1 '(:foreground "#B7950B"))
   '(monkeytype-face-header-2 '(:foreground "#F1C40F"))
   '(monkeytype-face-header-3 '(:foreground "#F1C40F"))
   '(monkeytype-minimum-transitions 50)
   '(monkeytype-mode-line-interval-update 10)
   '(monkeytype-treat-newline-as-space t)
   '(monkeytype-insert-log nil)
   '(monkeytype-directory "~/.monkeytype")
   '(monkeytype-randomize t)
   '(monkeytype-word-regexp (concat
     ":\\|"
     ";\\|"
     ",\\|"
     "(\\|"
     ")\\|"
     "?\\|"
     "!\\|"
     " \\|"
     "\"\\|"
     "\n\\|"
     "\`\\|"
     "\\."))
  )
#+END_SRC

#+RESULTS:

* Log

Logging can be enabled for debugging purposes (see =monkeytype-insert-log= customisation).

When enabled it should look as follows:

#+attr_latex: :width 600px
  [[file:img/monkeytype-log.png]]

* Install

Drop =monkeytype.el= somewhere in your =load-path=.

#+BEGIN_SRC emacs-lisp
  (add-to-list 'load-path "~/emacs.d/vendor")
  (require 'monkeytype)
#+END_SRC

* Changelog
:PROPERTIES:
:TOC:      :depth 0
:END:

** 0.1.1

*Additions*
+ Allow to practice mistyped words.
+ Allow to practice hard to type transitions.
+ Allow to save mistyped words or transitions to =~/.monkeytype= directory.
+ Option to auto-fill typing region.

*Changes*
+ Change =monkeytype--mode-line-update-seconds= option to =monkeytype-mode-line>interval-update= to have it work with typed entries (keystrokes) defaulting to 1 (update on each keystroke).

*Internal*
+ Removed =ht= library requirement.
+ Updated Emacs requirement to 25.1.
+ Misc layout improvements.
 
*Fixes*
+ Have =local-idle-timer= stop on paused or finished status.

** 0.1.0

Initial release.

* License

GPLv3
